# case_4

![Untitled diagram _ Mermaid Chart-2025-08-10-113257](https://github.com/user-attachments/assets/a2026a6a-665d-4bf8-917d-cc7c97ae746a)


1. Завантаження та підготовка даних

    Читаємо CSV-файли з postbacks, clicks, sources, offers.

    За потреби — семплюємо дані для пришвидшення тестування.

    Додаємо обчислювані поля (наприклад, remaining_daily_cap, EPC).

2. Розрахунок метрик EPC та CR

    EPC = total_payout / clicks_count

    CR = conversions / clicks_count

    Зберігаємо в окремих DataFrame для швидкого доступу.


3. Фільтрація доступних оферів

    Враховуємо:

        ліміти (daily_cap, remaining_daily_cap),

        основні сегменти (geo, OS),

        додаткові сегменти (browser, placement, device_type) при статзначимих відмінностях.

    Якщо немає пріоритезованих — використовуємо залишкові.


4. Алгоритм вибору офера (ε-жадібна стратегія)

    Експлуатація (1 - ε): вибрати офер з максимальним Adjusted_EPC.

    Дослідження (ε): вибрати випадковий офер із топ-3.

    Зберегти is_backfill і is_split.


5. Моніторинг KPI

    Щоденний підрахунок EPC, CR, кліків, конверсій.

    Збереження історії.


6. Алертинг

    Перевірка аномалій:

        падіння EPC > X%

        падіння CR > Y%

        стрибки трафіку

    Вивід попереджень і рекомендацій.


7. Симуляція

    Можна проганяти:

        один клік → офер

        масив кліків → KPI


